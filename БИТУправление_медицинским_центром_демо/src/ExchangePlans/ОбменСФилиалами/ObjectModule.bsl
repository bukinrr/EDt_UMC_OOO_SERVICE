#Область ОбработчикиСобытий

Процедура ПриЗаписи(Отказ)
	Если НЕ ПравилаДляОбменаСозданы() Тогда
		ОбменДаннымиСервер.ЗагрузитьПравилаДляОбменаДанными(Ложь, "ОбменСФилиалами", Перечисления.ВидыПравилДляОбменаДанными.ПравилаКонвертацииОбъектов, "ПравилаОбмена");
	КонецЕсли;
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

Функция ПравилаДляОбменаСозданы()
	
	СтруктураЗаписи = Новый Структура;
	СтруктураЗаписи.Вставить("ИмяПланаОбмена",  "ОбменСФилиалами");
	СтруктураЗаписи.Вставить("ВидПравил",       Перечисления.ВидыПравилДляОбменаДанными.ПравилаКонвертацииОбъектов);
	СтруктураЗаписи.Вставить("ИмяМакетаПравил", "ПравилаОбмена");
	СтруктураЗаписи.Вставить("ИсточникПравил",  Перечисления.ИсточникиПравилДляОбменаДанными.МакетКонфигурации);
	СтруктураЗаписи.Вставить("ИспользоватьФильтрВыборочнойРегистрацииОбъектов", Истина);
	
	НаборЗаписей = ОбменДаннымиСервер.СоздатьНаборЗаписейРегистраСведений(СтруктураЗаписи, "ПравилаДляОбменаДанными");
	
	НаборЗаписей.Прочитать();
	
	Возврат НаборЗаписей.Количество() > 0;
	
КонецФункции

#КонецОбласти 