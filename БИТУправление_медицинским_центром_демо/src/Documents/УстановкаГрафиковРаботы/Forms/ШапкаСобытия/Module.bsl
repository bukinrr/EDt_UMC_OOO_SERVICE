#Область РазделОписанияПеременных

&НаКлиенте
Перем мНаименованиеТекущегоВидаВремени;

#КонецОбласти

#Область ОбработчикиСобытий

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если ЗначениеЗаполнено(Параметры.ВидВремени) Тогда
		ВидВремени = Параметры.ВидВремени;
	КонецЕсли;
	Если ЗначениеЗаполнено(Параметры.Название) Тогда
		Название = Параметры.Название;
	КонецЕсли;
	Если ЗначениеЗаполнено(Параметры.Комментарий) Тогда
		Комментарий = Параметры.Комментарий;
	КонецЕсли;

КонецПроцедуры

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	
	УстановитьДоступностьЭлементовОписанияСобытия();
	
	мНаименованиеТекущегоВидаВремени = Строка(ВидВремени);
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура Сохранить(Команда)
	
	Если ГрафикиСотрудников.ЭтоОбычноеРабочееВремя(ВидВремени) Тогда
		Название = "";
		Комментарий = "";
	КонецЕсли;
	
	СтруктураВозврата = Новый Структура("ВидВремени, Название, Комментарий", ВидВремени, Название, Комментарий);
	ЭтаФорма.Закрыть(СтруктураВозврата);
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийЭлементовФормы

&НаКлиенте
Процедура СобытиеВидВремениПриИзменении(Элемент)
	
	Если Не ЗначениеЗаполнено(ВидВремени) Тогда
		ВидВремени = ПредопределенноеЗначение("Справочник.ВидыВремениГрафика.РабочееВремя");
	КонецЕсли;
	
	УстановитьДоступностьЭлементовОписанияСобытия();
	
	НаименованиеВидаВремени = Строка(ВидВремени);
	Если СокрЛП(Название) = мНаименованиеТекущегоВидаВремени
		Или ПустаяСтрока(Название)
	Тогда
		Название = НаименованиеВидаВремени;
	КонецЕсли;
	мНаименованиеТекущегоВидаВремени = НаименованиеВидаВремени;
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаКлиенте
Процедура УстановитьДоступностьЭлементовОписанияСобытия()
	
	ЭтоПростоеРабочееВремя = ГрафикиСотрудников.ЭтоОбычноеРабочееВремя(ВидВремени);
	Элементы.СобытиеНазвание.Доступность	= Не ЭтоПростоеРабочееВремя;
	Элементы.СобытиеКомментарий.Доступность	= Не ЭтоПростоеРабочееВремя;
	
КонецПроцедуры

#КонецОбласти
