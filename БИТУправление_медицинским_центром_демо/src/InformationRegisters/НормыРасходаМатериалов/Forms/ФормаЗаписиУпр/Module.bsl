
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.ЗначенияЗаполнения.Свойство("Номенклатура") Тогда
		Элементы.Номенклатура.Доступность = Ложь;
		Элементы.ХарактеристикаНоменклатуры.Видимость	= УправлениеНастройками.ПолучитьПараметрУчетнойПолитики("ВестиУчетПоХарактеристикам")
														И Параметры.ЗначенияЗаполнения.Номенклатура.ВестиУчетПоХарактеристикам;
	Иначе
		Элементы.ХарактеристикаНоменклатуры.Видимость	= УправлениеНастройками.ПолучитьПараметрУчетнойПолитики("ВестиУчетПоХарактеристикам")
														И Запись.Номенклатура.Пустая() Или Запись.Номенклатура.ВестиУчетПоХарактеристикам;	
	КонецЕсли;
	
	Если Запись.ИсходныйКлючЗаписи.Пустой() Тогда
		Запись.ВходитВСтоимость = УправлениеНастройками.ПолучитьПараметрУчетнойПолитики("ВключатьНормативныеМатериалыВСтоимостьУслуг");
	КонецЕсли;
	
	Элементы.ХарактеристикаМатериала.Видимость		= УправлениеНастройками.ПолучитьПараметрУчетнойПолитики("ВестиУчетПоХарактеристикам");
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийЭлементовФормы

&НаКлиенте
Процедура МатериалПриИзменении(Элемент)
	
	Если ЗначениеЗаполнено(Запись.Материал) Тогда
		МатериалПриИзмененииСервер();
	КонецЕсли;
	
КонецПроцедуры
#КонецОбласти

#Область СлужебныеПроцедурыИФункции
&НаСервере
Процедура МатериалПриИзмененииСервер()
	
	Если Запись.ЕдиницаИзмерения.Пустая() Или 
		Запись.ЕдиницаИзмерения.Владелец <> Запись.Материал
	Тогда
	    Запись.ЕдиницаИзмерения = Запись.Материал.ЕдиницаХраненияОстатков;
	КонецЕсли;
	
КонецПроцедуры
#КонецОбласти