#Область ОбработчикиСобытий

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	// Настройка элементов формы
	
	// Приемы
	ПостоплатаПоПриемамИспользуется = УправлениеНастройкамиПереопределяемый.ПолучитьПараметрУчета("ПостоплатаПоПриемамИспользуется") = Истина;
	
	// Лаборатории
	Если Метаданные.Подсистемы.Найти("ЛабораторныеИсследования") <> Неопределено Тогда
		ЛабораторияИспользуется = УправлениеНастройкамиПереопределяемый.ПолучитьПараметрУчета("ИспользоватьЛабораторныеИсследования") = Истина;
		ЛабораторияПоПостоплатеПрименяется = ЛабораторияИспользуется И УправлениеНастройкамиПереопределяемый.ПолучитьПараметрУчета("ЛабораторияПоПостоплатеПрименяется") = Истина;
		
		Элементы.ЛабораторияПоПостоплатеПрименяется.Доступность = ЛабораторияИспользуется;
	Иначе
		Элементы.ЛабораторияПоПостоплатеПрименяется.Видимость = Ложь;
	КонецЕсли;
	
	// Вакцинации
	Если Метаданные.НайтиПоПолномуИмени("Подсистемы.Медицина.Подсистемы.Вакцинации") <> Неопределено Тогда
		ИспользоватьВакцинации = УправлениеНастройкамиПереопределяемый.ПолучитьПараметрУчета("ИспользоватьВакцинации") = Истина;
	Иначе
		Элементы.ИспользоватьВакцинации.Видимость = Ложь;
	КонецЕсли;
	
	Если  Не Элементы.ЛабораторияПоПостоплатеПрименяется.Видимость
		И Не Элементы.ИспользоватьВакцинации.Видимость
	Тогда
		Элементы.ПостоплатаПоПриемамИспользуется.ОтображениеПодсказки = ОтображениеПодсказки.Нет;
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура ЗаписатьИЗакрыть(Команда)
	
	УправлениеНастройкамиПереопределяемый.УстановитьПараметрУчета("ПостоплатаПоПриемамИспользуется", ПостоплатаПоПриемамИспользуется);
	Если Элементы.ЛабораторияПоПостоплатеПрименяется.Видимость Тогда
		УправлениеНастройкамиПереопределяемый.УстановитьПараметрУчета("ЛабораторияПоПостоплатеПрименяется", ЛабораторияПоПостоплатеПрименяется);
	КонецЕсли;
	
	Закрыть();
	
КонецПроцедуры

#КонецОбласти