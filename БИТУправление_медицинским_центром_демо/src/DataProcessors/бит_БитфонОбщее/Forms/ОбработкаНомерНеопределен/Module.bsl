
#Область ОбработчикиСобытийФормы

//+Переопределенное
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Элементы.СоздатьКонтрагента.Заголовок = "Создать клиента";
	Реквизит = Новый РеквизитФормы("Событие", Новый ОписаниеТипов("ДокументСсылка.Событие"));
	
	ДобавляемыеРеквизиты = Новый Массив;									
	ДобавляемыеРеквизиты.Добавить(Реквизит);
	Попытка
		ЭтаФорма.ИзменитьРеквизиты(ДобавляемыеРеквизиты);
	Исключение
		а= ПодробноеПредставлениеОшибки(ИнформацияОбОшибке());
		
	КонецПопытки;
	
	Если Параметры.Свойство("Событие") И ЗначениеЗаполнено(Параметры.Событие) Тогда
		ЭтаФорма.Событие = Параметры.Событие;
	КонецЕсли;
	
КонецПроцедуры
//-Переопределенное

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	Заголовок = "Вызов с " + Параметры.НеизвестныйНомер;
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура СоздатьКонтрагента(Команда)
	//+Переопределенное
	//бит_ТелефонияКлиентПереопределяемый.СоздатьНовогоКонтрагента(Параметры.НеизвестныйНомер);
	бит_ТелефонияКлиентПереопределяемый.СоздатьНовогоКонтрагента(Параметры.НеизвестныйНомер, ЭтаФорма.Событие);
	//-Переопределенное
	Закрыть();
КонецПроцедуры

&НаКлиенте
Процедура ДобавитьНомер(Команда)
	//+Переопределенное
	//бит_ТелефонияКлиентПереопределяемый.ВыбратьКонтрагентаЗадатьНомер(Параметры.НеизвестныйНомер);
	бит_ТелефонияКлиентПереопределяемый.ВыбратьКонтрагентаЗадатьНомер(Параметры.НеизвестныйНомер, ЭтаФорма.Событие);
	//-Переопределенное
	Закрыть();
КонецПроцедуры

#КонецОбласти

