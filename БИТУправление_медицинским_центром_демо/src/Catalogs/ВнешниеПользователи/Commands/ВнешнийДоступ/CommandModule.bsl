#Область ОбработчикиСобытий

&НаКлиенте
Процедура ОбработкаКоманды(ПараметрКоманды, ПараметрыВыполненияКоманды)
	
	НайденныйВнешнийПользователь = Неопределено;
	ПараметрыФормы = Новый Структура;
	ЕстьПравоДобавленияВнешнегоПользователя = Ложь;
	
	Если ВнешниеПользователи.ОбъектАвторизацииИспользуется(ПараметрКоманды, , НайденныйВнешнийПользователь, ЕстьПравоДобавленияВнешнегоПользователя) Тогда
		ПараметрыФормы.Вставить("Ключ", НайденныйВнешнийПользователь);
	ИначеЕсли ЕстьПравоДобавленияВнешнегоПользователя Тогда
		ПараметрыФормы.Вставить("ОбъектАвторизацииНовогоВнешнегоПользователя", ПараметрКоманды);
	Иначе
		ПоказатьПредупреждение(,НСтр("ru = 'Доступ к информационной базе запрещен и не предоставлялся.'"));
		Возврат;
	КонецЕсли;
	
	ОткрытьФорму("Справочник.ВнешниеПользователи.ФормаОбъекта", ПараметрыФормы, ПараметрыВыполненияКоманды.Источник, ПараметрыВыполненияКоманды.Уникальность, ПараметрыВыполненияКоманды.Окно);
	
КонецПроцедуры

#КонецОбласти