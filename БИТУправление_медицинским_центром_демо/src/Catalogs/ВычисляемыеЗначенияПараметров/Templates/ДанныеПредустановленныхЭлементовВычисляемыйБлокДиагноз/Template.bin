<?xml version="1.0" encoding="UTF-8"?>
<ФайлОбмена ВерсияФормата="2.0" ДатаВыгрузки="2015-11-10T20:58:36" НачалоПериодаВыгрузки="0001-01-01T00:00:00" ОкончаниеПериодаВыгрузки="0001-01-01T00:00:00" ИмяКонфигурацииИсточника="БИТУправлениеМедицинскимЦентром" ИмяКонфигурацииПриемника="БИТУправлениеМедицинскимЦентром" ИдПравилКонвертации="e39c5eab-9ab9-477c-929b-78800a32a5f3" Комментарий="">
<ПравилаОбмена>
	<ВерсияФормата>2.01</ВерсияФормата>
	<Ид>e39c5eab-9ab9-477c-929b-78800a32a5f3</Ид>
	<Наименование>БИТУправлениеМедицинскимЦентром --&gt; БИТУправлениеМедицинскимЦентром</Наименование>
	<ДатаВремяСоздания>2014-02-17T14:07:00</ДатаВремяСоздания>
	<Источник>БИТУправлениеМедицинскимЦентром</Источник>
	<Приемник>БИТУправлениеМедицинскимЦентром</Приемник>
	<Параметры/>
	<Обработки/>
	<ПравилаКонвертацииОбъектов>
		<Правило>
			<Код>ВычисляемыеЗначенияПараметров</Код>
			<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
			<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
			<Источник>СправочникСсылка.ВычисляемыеЗначенияПараметров</Источник>
			<Приемник>СправочникСсылка.ВычисляемыеЗначенияПараметров</Приемник>
		</Правило>
	</ПравилаКонвертацииОбъектов>
	<ПравилаОчисткиДанных/>
	<Алгоритмы/>
	<Запросы/>
</ПравилаОбмена>
<Объект Нпп="1" Тип="СправочникСсылка.ВычисляемыеЗначенияПараметров" ИмяПравила="ВычисляемыеЗначенияПараметров"><Ссылка Нпп="1">
	<Свойство Имя="{УникальныйИдентификатор}" Тип="Строка">
		<Значение>90eb9681-75b7-4170-bec8-542c0d001a04</Значение>
	</Свойство>
	<Свойство Имя="Наименование" Тип="Строка">
		<Значение>Блок HTML: Диагноз</Значение>
	</Свойство>
</Ссылка>
	<Свойство Имя="АлгоритмВычисления" Тип="Строка">
		<Значение>НомерДиагноза = 1;
Текст = "";
ТЧ = Объект.Диагнозы;
Для Каждого Стр Из ТЧ Цикл
	Если ТЧ.Количество() &gt; 1 Тогда
		Текст = Символы.ПС + Текст + Строка(НомерДиагноза) + ". ";
		НомерДиагноза = НомерДиагноза + 1;
	КонецЕсли;
	
	Если ЗначениеЗаполнено(Стр.Диагноз.КодДиагноза) Тогда
		МКБ = "[" + Стр.Диагноз.КодДиагноза + "] ";
	Иначе
		МКБ = "";
	КонецЕсли;
	
	Диагноз = Стр.Диагноз.Наименование;
	Описание = Стр.Детализация;
	Сопутствующий = Стр.Сопутствующий;
	К1 = Строка(Стр.Классификация1);
	К2 = Строка(Стр.Классификация2);
	К3 = Строка(Стр.Классификация3);
	Травма = Стр.Травма.Наименование;
	Исход = ?(Стр.Исход.ПолноеНаименование &lt;&gt; "", Стр.Исход.ПолноеНаименование, Стр.Исход.Наименование);
	
	Если ЗначениеЗаполнено(МКБ + Диагноз) Тогда 
		Текст = Текст + "Диагноз: " + МКБ + Диагноз + "&lt;br&gt;";
	КонецЕсли;
	
	Если ЗначениеЗаполнено(Описание) Тогда
		Текст = Текст + "Описание: " + Описание + "&lt;br&gt;";
	КонецЕсли;
	
	Если ЗначениеЗаполнено(Сопутствующий) Тогда
		Текст = Текст + "Сопутствующий: " + Сопутствующий + "&lt;br&gt;";
	КонецЕсли;
	
	Если ЗначениеЗаполнено(К1 + К2 + К3) Тогда
		Текст = Текст + "Классификация: "; 
	КонецЕсли;
	
	Если ЗначениеЗаполнено(К1) Тогда
		Текст = Текст + К1 + ", ";
	КонецЕсли;
	
	Если ЗначениеЗаполнено(К2) Тогда
		Текст = Текст + К2 + ", ";
	КонецЕсли;
	
	Если ЗначениеЗаполнено(К3) Тогда
		Текст = Текст + К3;
	КонецЕсли;
	
	Если ЗначениеЗаполнено(К1 + К2 + К3) Тогда
		Текст = Текст + "&lt;br&gt;"; 
	КонецЕсли;
	
	Если ЗначениеЗаполнено(Травма) Тогда
		Текст = Текст + "Вид нетрудоспособности: " + Травма;
	КонецЕсли;
	
	Если ЗначениеЗаполнено(Исход) Тогда
		Если Травма &lt;&gt; "" Тогда
			Текст = Текст + ", ";
		КонецЕсли;
		Текст = Текст + "Исход диагноза: " + Исход;
	КонецЕсли;
	
	Если ЗначениеЗаполнено(Травма + Исход) Тогда
		Текст = Текст + "&lt;br&gt;"; 
	КонецЕсли;
	
КонецЦикла;

Результат = Текст;</Значение>
	</Свойство>
</Объект>
</ФайлОбмена>
