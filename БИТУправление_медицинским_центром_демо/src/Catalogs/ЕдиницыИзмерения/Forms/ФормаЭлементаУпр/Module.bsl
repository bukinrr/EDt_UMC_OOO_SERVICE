#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Объект.Ссылка.Пустая() 
		И Объект.Коэффициент = 0
	Тогда
		Объект.Коэффициент = 1;
	КонецЕсли;
	
	Если Объект.Ссылка.Пустая() Тогда
		Если Не ЗначениеЗаполнено(Объект.Владелец) Тогда
			ТекущийЭлемент = Элементы.Владелец;
		ИначеЕсли Не ЗначениеЗаполнено(Объект.ЕдиницаПоКлассификатору) Тогда
			ТекущийЭлемент = Элементы.ЕдиницаПоКлассификатору;
		Иначе
			ТекущийЭлемент = Элементы.Наименование;
		КонецЕсли;
	КонецЕсли;

КонецПроцедуры

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	
	Если Объект.Ссылка.Пустая()
		И Не ЗначениеЗаполнено(Объект.ЕдиницаПоКлассификатору)
	Тогда
		ОткрытьФорму("Справочник.КлассификаторЕдиницИзмерения.ФормаВыбора",, Элементы.ЕдиницаПоКлассификатору, Объект.Владелец);
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийЭлементовФормы

&НаКлиенте
Процедура ЕдиницаПоКлассификаторуПриИзменении(Элемент)
	
	Если ПустаяСтрока(Объект.Наименование) Тогда
		Объект.Наименование = Строка(Объект.ЕдиницаПоКлассификатору);
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

