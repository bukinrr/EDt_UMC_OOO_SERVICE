#Область ОбработчикиСобытийЭлементовФормы

&НаКлиенте
Процедура СостоитИзДругихУпаковокПереключательПриИзменении(Элемент)
	Объект.СостоитИзДругихУпаковок = (СостоитИзДругихУпаковок = 1);
	УстановитьТекущуюСтраницуКоэффициентов(ЭтотОбъект);
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.ПараметрыВыбора.Свойство("ТекущаяУпаковка") Тогда
		Если Не ЗначениеЗаполнено(Объект.Владелец) Тогда
			Объект.Владелец = Параметры.ПараметрыВыбора.ТекущаяУпаковка.Владелец;
			Если Не ЗначениеЗаполнено(Объект.БазоваяЕдиницаИзмерения) Тогда
				Объект.БазоваяЕдиницаИзмерения = Объект.Владелец.ЕдиницаХраненияОстатков;
			КонецЕсли;
		КонецЕсли;
	КонецЕсли;
	
	ПриСозданииНовогоПриЧтенииНаСервере();
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаКлиентеНаСервереБезКонтекста
Процедура УстановитьТекущуюСтраницуКоэффициентов(Форма)
	
	Если Форма.Объект.СостоитИзДругихУпаковок Тогда
		Форма.Элементы.ГруппаСтраницыКоэффициенты.ТекущаяСтраница = Форма.Элементы.ГруппаКоличествоУпаковокУпаковка;
	Иначе
		Форма.Элементы.ГруппаСтраницыКоэффициенты.ТекущаяСтраница = Форма.Элементы.ГруппаКоэффициентЕдиницаИзмерения;
	КонецЕсли;
	
КонецПроцедуры

&НаСервере
Процедура ПриЧтенииНаСервере(ТекущийОбъект)
	ПриСозданииНовогоПриЧтенииНаСервере();
КонецПроцедуры

&НаСервере
Процедура ПриСозданииНовогоПриЧтенииНаСервере()
	
	СостоитИзДругихУпаковок = ?(Объект.СостоитИзДругихУпаковок, 1, 0);
	УстановитьТекущуюСтраницуКоэффициентов(ЭтотОбъект);
	
КонецПроцедуры

#КонецОбласти