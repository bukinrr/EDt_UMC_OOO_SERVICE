#Область ОбработчикиСобытий

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("ВидКлассификатора") И ЗначениеЗаполнено(Параметры.ВидКлассификатора) Тогда
		ОтборВидКлассификатора = Параметры.ВидКлассификатора;
	Иначе
		ОтборВидКлассификатора = Неопределено;
	КонецЕсли;
	
	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	ВидыКлассификаторовМинЗдрава.Ссылка КАК Ссылка
		|ИЗ
		|	Перечисление.ВидыКлассификаторовМинЗдрава КАК ВидыКлассификаторовМинЗдрава";
	
	Выборка = Запрос.Выполнить().Выбрать();
	
	Пока Выборка.Следующий() Цикл
		СтрокаТаблицы = ВидыКлассификаторов.Добавить();
		СтрокаТаблицы.Ссылка = Выборка.Ссылка;
		Если СтрокаТаблицы.Ссылка = ОтборВидКлассификатора Тогда
			СтрокаТаблицы.Загружать = Истина;
			Элементы.ВидыКлассификаторов.ТекущаяСтрока = ВидыКлассификаторов.Индекс(СтрокаТаблицы);
		КонецЕсли;
	КонецЦикла;
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура ЗагрузитьВыбранные(Команда)
	
	Для Каждого Вид Из ВидыКлассификаторов Цикл
		Если Вид.Загружать Тогда
			СтруктураПараметры = Новый Структура("НаименованиеСправочника, ВидКлассификатора", "КлассификаторыМинЗдрава", Вид.Ссылка);
			ОткрытьФорму("ОбщаяФорма.ЗагрузкаНСИЕГИСЗ", СтруктураПараметры, Элементы.ВидыКлассификаторов, ЭтаФорма);
		КонецЕсли;
	КонецЦикла;
	
	Закрыть();
	
КонецПроцедуры

#КонецОбласти
